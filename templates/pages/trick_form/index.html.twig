{% extends "base.html.twig" %}

{% block javascripts %}
<script src="{{ asset('assets/js/script.js') }}" defer></script>
{% endblock %}

{% block body %}
    <div class="ftco-blocks-cover-1 form-cover">
        <div class="container">
          <div class="row align-items-center justify-content-center text-center">
            <div class="col-md-7 form-bg">
            <div class="form-style"> 
            <h1 class="mb-4">Créez une figure</h1>
                {{ form_start(form) }}
                    
                    {{ form_row(form.name, {
                        label: none,
                        attr: {
                            placeholder: 'Nom de la figure'
                        },
                        label_attr: {
                            class: 'form-label'
                        },
                        row_attr: {
                            class: 'form-row'
                        }
                    }) }}
            

                    {{ form_row(form.description, {
                        label: '',
                        attr: {
                            placeholder: 'Nom de la figure'
                        },
                        label_attr: {
                            class: 'form-label'
                        },
                        row_attr: {
                            class: 'form-row'
                        }
                    }) }}


                    {{ form_row(form.category, {
                        row_attr: {
                            class: 'form-row'
                        }
                    }) }}

                    <ul class="videos"
                        data-index="{{ form.videos|length > 0 ? form.videos|last.vars.name + 1 : 0 }}"
                        data-prototype="{{ form_widget(form.videos.vars.prototype)|e('html_attr') }}"
                    > 
                    {% for video in form.videos %}
                        {{ form_row(video.videoEmbed, {
                                row_attr: {
                                class: 'form-row'
                            }
                        }) }}
                    {% endfor %}

                    </ul>
                    <button type="button" class="add_video_link" data-collection-holder-class="videos">Add a video</button>



                    <ul class="images"
                        data-index="{{ form.images|length > 0 ? form.images|last.vars.name + 1 : 0 }}"
                        data-prototype="{{ form_widget(form.images.vars.prototype)|e('html_attr') }}"
                    > 
                    {% for image in form.images %}$
                        {{ form_row(image.file, {
                                label: 'Séléctionner une image',
                                label_attr: {
                                class: 'image-label'
                            },
                            row_attr: {
                            class: 'form-row'
                        }
                        }) }}
                        <div class="col-lg-4 col-md-6 mb-4">
                        <div class="listing-image">
                            <img src="{{ asset('uploads/tricks/' ~ image.vars.value.FileName) }}" alt="Image" class="img-fluid">
                        </div>
                        </div> 
                    {% endfor %}


                    </ul>
                    <button type="button" class="add_image_link" data-collection-holder-class="images">Add an image</button>


                    <button type="submit" class="btn btn-primary">Créer</button>
                {{ form_end(form) }}
            </div>  
            </div>
          </div>
        </div>
    </div>
{% endblock %}